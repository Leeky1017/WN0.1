# WriteNow äº§å“è§„èŒƒ

WriteNow æ˜¯åˆ›ä½œè€…çš„ IDE â€”â€” ç”¨ Cursor å¯¹ç¨‹åºå‘˜çš„é©å‘½ï¼Œå»é©å‘½åˆ›ä½œè€…çš„å†™ä½œä½“éªŒã€‚

## Status

- æœ¬è§„èŒƒï¼šActiveï¼ˆæŒç»­æ›´æ–°çš„æƒå¨åŸºçº¿ï¼‰
- æ¶æ„ä¸»çº¿ï¼šEclipse Theiaï¼ˆâœ… è¿ç§»å®Œæˆï¼šPhase 0â€“3ï¼Œ2026-01-24ï¼‰
- å‰ç«¯åŸºçº¿ï¼š`writenow-frontend/`ï¼ˆâœ… Frontend V2 Phase 0â€“6 å®Œæˆï¼š2026-01-26ï¼›Electron 34 + Vite 6 + React 18ï¼‰
- ä»£ç åŸºçº¿ï¼š`writenow-theia/`ï¼ˆproduction Theia workspaceï¼šbrowser + electron + writenow-core extensionï¼‰
- Legacy æ¸…ç†ï¼š`theia-poc/` å·²ç§»é™¤ï¼›`src/` ä»…ä¿ç•™ `types/` + `locales/`ï¼›`electron/` ä»…ä¿ç•™ `ipc/`ï¼ˆcontract SSOTï¼‰+ `skills/`ï¼ˆbuiltin packagesï¼‰ï¼›å‰ç«¯æ¶æ„é‡æ„åå·²ç§»é™¤ï¼š`writenow-frontend-old/`ï¼ˆæ—§å‰ç«¯ï¼‰ã€`figmaå‚è€ƒ/`ï¼ˆæ—§å‚è€ƒä»£ç ï¼‰ã€`backup/`ï¼ˆä¸´æ—¶å¤‡ä»½ï¼‰
- æ²»ç†ä¸äº¤ä»˜è§„èŒƒï¼š`AGENTS.md`
- è¿è¡Œæ—¥å¿—ï¼š`openspec/_ops/task_runs/ISSUE-<N>.md`

## Purpose

æœ¬è§„èŒƒç”¨äºæè¿° WriteNow çš„æ„¿æ™¯ã€æ ¸å¿ƒæ¦‚å¿µã€ç³»ç»Ÿæ¶æ„ä¸å®æ–½è·¯çº¿å›¾ï¼Œä½œä¸ºåç»­ Sprint åˆ†æ”¯è§„èŒƒä¸å®ç°çš„ä¸Šæ¸¸æ¥æºä¸ä¸€è‡´æ€§åŸºçº¿ã€‚

## Requirements

### Requirement: æœ¬äº§å“è§„èŒƒ MUST å®šä¹‰å¯éªŒè¯çš„ä¸€è‡´æ€§åŸºçº¿

æœ¬äº§å“è§„èŒƒ MUST æä¾›åç»­è¿­ä»£çš„ç»Ÿä¸€åŸºçº¿ï¼ˆæœ¯è¯­ã€æŠ€æœ¯æ ˆã€å…³é”®ç­–ç•¥ä¸è·¯çº¿å›¾ï¼‰ï¼Œå¹¶è¢« Sprint çº§è§„èŒƒä»¥â€œæå– + å¢é‡â€çš„æ–¹å¼å¼•ç”¨ä¸ç»†åŒ–ã€‚

#### Scenario: Sprint è§„èŒƒæ´¾ç”Ÿä¸€è‡´
- **WHEN** å›¢é˜Ÿåˆ›å»º Sprint åˆ†æ”¯è§„èŒƒä¸ä»»åŠ¡å¡ç‰‡
- **THEN** å…¶å†…å®¹ MUST ä¸æœ¬è§„èŒƒåœ¨æŠ€æœ¯æ ˆã€æœ¯è¯­ä¸èŒƒå›´å®šä¹‰ä¸Šä¿æŒä¸€è‡´ï¼Œå¹¶ä»¥æœ¬è§„èŒƒä½œä¸ºå¼•ç”¨æ¥æº

### Requirement: å·¥ç¨‹æ²»ç†ä¸äº¤ä»˜æµç¨‹ MUST ä»¥ `AGENTS.md` ä¸ºå‡†

`AGENTS.md` å®šä¹‰äº†æœ¬ä»“åº“çš„æ²»ç†ç¡¬çº¦æŸï¼ˆä»£ç åŸåˆ™/å¼‚å¸¸ä¸é˜²å¾¡æ€§ç¼–ç¨‹/å·¥ä½œç•™ç—•/ç¦æ­¢äº‹é¡¹ï¼‰ã€‚ä»»ä½•å˜æ›´éƒ½ MUST éµå¾ªè¯¥è§„èŒƒï¼Œå¦åˆ™ä¸å¾—åˆå¹¶ã€‚

#### Scenario: PR å¯äº¤ä»˜ä¸”å¯è¿½æº¯
- **WHEN** å›¢é˜Ÿæäº¤ PR äº¤ä»˜ä»»æ„å˜æ›´
- **THEN** PR MUST æ»¡è¶³ `AGENTS.md` ä¸­çš„äº¤ä»˜æµç¨‹ï¼ˆIssue/Branch/Run log/éªŒè¯è¯æ®ï¼‰ï¼Œå¹¶ä¿è¯å˜æ›´å¯è¿½æº¯ã€å¯å¤ç°ã€å¯éªŒè¯

---

## ä¸€ã€äº§å“æ„¿æ™¯

### æ ¸å¿ƒç†å¿µ

ç”¨æˆ·ä¸æ˜¯åœ¨"å†™æ–‡æ¡£"ï¼Œæ˜¯åœ¨"æ„å»ºæ–‡å­¦ä¸–ç•Œ"ã€‚

### æ ¸å¿ƒå·®å¼‚åŒ–

| ç»´åº¦ | ä¼ ç»Ÿå·¥å…· / ChatGPT | WriteNow |
|------|-------------------|----------|
| å†™ä½œæ¨¡å¼ | çº¿æ€§å†™ä½œ | é¡¹ç›®åŒ–ç®¡ç† |
| AI äº¤äº’ | å¤åˆ¶ç²˜è´´å¼  | é€‰ä¸­ â†’ SKILL â†’ diff â†’ åº”ç”¨ |
| ä¸Šä¸‹æ–‡ | å¯¹è¯å†å² | å…¨é¡¹ç›®è¯­å¢ƒæ„ŸçŸ¥ |
| ç‰ˆæœ¬ç®¡ç† | æ—  | æ–‡å­—çš„ Git |
| å‘å¸ƒ | æ‰‹åŠ¨è°ƒæ ¼å¼ | ä¸€é”®å¤šå¹³å° |

### ç›®æ ‡ç”¨æˆ·

**ä¸€çº§ç”¨æˆ·ï¼ˆé«˜ä»˜è´¹æ„æ„¿ï¼‰**
- ç”»åƒï¼šè‡ªåª’ä½“å¤§Vã€ç­¾çº¦ä½œå®¶ã€å†…å®¹å›¢é˜Ÿ
- ç—›ç‚¹ï¼šæ•ˆç‡ã€ä¸€è‡´æ€§ã€å¤šå¹³å°å‘å¸ƒ
- ARPUï¼šï¿¥800-2000/å¹´

**äºŒçº§ç”¨æˆ·ï¼ˆä¸­ç­‰ä»˜è´¹æ„æ„¿ï¼‰**
- ç”»åƒï¼šä¸­è…°éƒ¨è‡ªåª’ä½“ã€å‰¯ä¸šå†™ä½œã€ç”µå•†æ–‡æ¡ˆ
- ç—›ç‚¹ï¼šå†™ä½œå¡å£³ã€ä¸ä¼šæ¶¦è‰²
- ARPUï¼šï¿¥200-500/å¹´

**ä¸‰çº§ç”¨æˆ·ï¼ˆå…è´¹/è½¬åŒ–ï¼‰**
- ç”»åƒï¼šæ–°æ‰‹ã€å­¦ç”Ÿã€å…´è¶£å†™ä½œè€…
- ç­–ç•¥ï¼šå…è´¹ç‰ˆ + é™é¢ä¿ƒè½¬åŒ–

---

## äºŒã€æ ¸å¿ƒæ¦‚å¿µ

### 1. SKILL ç³»ç»Ÿï¼ˆåˆ›ä½œè€…çš„ Toolsï¼‰

SKILL = Promptæ¨¡æ¿ + ä¸Šä¸‹æ–‡éœ€æ±‚ + è¾“å‡ºæ ¼å¼

ç¼–ç¨‹ Agent æœ‰ toolsï¼ˆview_fileã€run_commandï¼‰ï¼Œåˆ›ä½œ Agent æœ‰ SKILLã€‚

**SKILL åˆ†ç±»ï¼š**

| ç±»å‹ | SKILL | åŠŸèƒ½ |
|------|-------|------|
| æ”¹å†™ | æ¶¦è‰²æ–‡æœ¬ | ä¼˜åŒ–è¡¨è¾¾å’Œç”¨è¯ |
| æ”¹å†™ | ç²¾ç®€æ®µè½ | åˆ å‡å†—ä½™å†…å®¹ |
| æ”¹å†™ | æ‰©å†™æ®µè½ | ä¸°å¯Œç»†èŠ‚æå†™ |
| æ”¹å†™ | æ”¹å˜é£æ ¼ | è°ƒæ•´è¯­æ°”/æ–‡é£ |
| ç”Ÿæˆ | ç”Ÿæˆå¤§çº² | ä»ä¸»é¢˜ç”Ÿæˆç»“æ„ |
| ç”Ÿæˆ | æ‰©å†™æƒ…èŠ‚ | ä»å¤§çº²ç‚¹æ‰©å±•æˆæ®µè½ |
| ç”Ÿæˆ | ç”Ÿæˆå¯¹è¯ | åŸºäºåœºæ™¯å’Œäººç‰©ç”Ÿæˆ |
| ç”Ÿæˆ | ç»­å†™å†…å®¹ | åŸºäºå‰æ–‡ç»§ç»­ |
| åˆ†æ | ä¸€è‡´æ€§æ£€æŸ¥ | å‘ç°å‰åçŸ›ç›¾ |
| åˆ†æ | æƒ…èŠ‚èŠ‚å¥ | å™äº‹èŠ‚å¥å»ºè®® |
| è¾…åŠ© | å–åå»ºè®® | äººç‰©/åœ°ç‚¹å‘½å |
| è¾…åŠ© | èµ„æ–™æŸ¥è¯¢ | å†å²/åœ°ç†è€ƒè¯ |

### 2. ç‰ˆæœ¬å¯¹æ¯”ï¼ˆæ–‡å­—çš„ Gitï¼‰

æ ¸å¿ƒæ´å¯Ÿï¼šåˆ›ä½œä¸æ˜¯ä¸€æ¬¡å†™å¯¹ï¼Œè€Œæ˜¯åå¤æ‰“ç£¨ã€‚

- æ¯æ¬¡ AI ä¿®æ”¹è‡ªåŠ¨ä¿å­˜ä¸ºç‰ˆæœ¬
- ç‰ˆæœ¬å¯å‘½åï¼ˆå¦‚"ç¬¬ä¸€ç‰ˆ"ã€"æ›´æ¿€çƒˆçš„å†²çª"ï¼‰
- Diff è§†å›¾å¯¹æ¯”ä»»æ„ä¸¤ä¸ªç‰ˆæœ¬
- ä¸€é”®åˆ‡æ¢/å›é€€

### 3. ä¸Šä¸‹æ–‡å·¥ç¨‹ï¼ˆå­¦ä¹  Manusï¼‰

æ ¸å¿ƒç›®æ ‡ï¼šè®©ç”¨æˆ·è§‰å¾—"Agent æ¯”æˆ‘è‡ªå·±è¿˜æ‡‚æˆ‘å†™çš„ä¸œè¥¿"ã€‚

å‚è€ƒ Manus çš„ä¸Šä¸‹æ–‡å·¥ç¨‹æ–¹æ³•è®ºï¼Œé€‚é…åˆ°åˆ›ä½œåœºæ™¯ï¼š

**3.1 ä¸Šä¸‹æ–‡å±‚æ¬¡**

| å±‚æ¬¡ | å†…å®¹ | Token å æ¯” | æ›´æ–°é¢‘ç‡ |
|------|------|-----------|---------|
| é¡¹ç›®çº§ | é¡¹ç›®è®¾å®šã€äººç‰©å¡ç‰‡ã€ä¸–ç•Œè§‚ | 20% | ç”¨æˆ·æ‰‹åŠ¨æ›´æ–° |
| æ–‡ç« çº§ | å½“å‰æ–‡ç« å…¨æ–‡ã€å¤§çº² | 40% | å®æ—¶ |
| æ®µè½çº§ | å½“å‰é€‰åŒºã€å‰åæ–‡ | 30% | æ¯æ¬¡ SKILL è°ƒç”¨ |
| æŒ‡ä»¤çº§ | SKILL promptã€ç”¨æˆ·è¡¥å……æŒ‡ä»¤ | 10% | æ¯æ¬¡è¯·æ±‚ |

**3.2 ä¸Šä¸‹æ–‡å‹ç¼©ç­–ç•¥ï¼ˆå€Ÿé‰´ Manusï¼‰**

Manus çš„è¾“å…¥:è¾“å‡ºæ¯”ä¾‹çº¦ä¸º 100:1ï¼Œè¯´æ˜ä¸Šä¸‹æ–‡ç®¡ç†è‡³å…³é‡è¦ã€‚

WriteNow çš„ç­–ç•¥ï¼š
- **å¯é€†å‹ç¼©**ï¼šå°†å®Œæ•´æ–‡ç« ç¼©å‡ä¸ºå…³é”®ä¿¡æ¯æ‘˜è¦ï¼Œä¿ç•™æ¢å¤èƒ½åŠ›
- **ä¸å¯é€†æ‘˜è¦**ï¼šå¯¹äºè¶…é•¿é¡¹ç›®ï¼Œç”Ÿæˆç»“æ„åŒ–æ‘˜è¦ä½œä¸º"é¡¹ç›®è®°å¿†"
- **KV ç¼“å­˜ä¼˜åŒ–**ï¼šç›¸åŒå‰ç¼€çš„ä¸Šä¸‹æ–‡å¤ç”¨ç¼“å­˜ï¼Œé™ä½æˆæœ¬

**3.3 ä¸Šä¸‹æ–‡æ³¨å…¥è§„åˆ™**

ä¸åŒ SKILL éœ€è¦ä¸åŒçš„ä¸Šä¸‹æ–‡ï¼š

| SKILL ç±»å‹ | éœ€è¦çš„ä¸Šä¸‹æ–‡ |
|-----------|------------|
| æ¶¦è‰²/ç²¾ç®€ | å½“å‰æ®µè½ + å†™ä½œé£æ ¼æŒ‡å— |
| æ‰©å†™ | å½“å‰æ®µè½ + å‰åå„ 500 å­— + å¤§çº²ä½ç½® |
| ç”Ÿæˆå¯¹è¯ | åœºæ™¯æè¿° + ç›¸å…³äººç‰©è®¾å®š |
| ä¸€è‡´æ€§æ£€æŸ¥ | å…¨æ–‡æ‘˜è¦ + äººç‰©æ—¶é—´çº¿ |
| ç»­å†™ | å‰æ–‡ 2000 å­— + å¤§çº²åç»­è¦ç‚¹ |

**3.4 åˆ›ä½œè€… Agent çš„ Tools**

WriteNow çš„ Agent ä¸éœ€è¦å¤æ‚çš„ä»£ç è°ƒè¯•/éƒ¨ç½²èƒ½åŠ›ï¼Œä½†éœ€è¦ä¸“ç”¨ Toolsï¼š

| Tool | åŠŸèƒ½ | è§¦å‘åœºæ™¯ |
|------|------|---------|
| `context:get_character` | è·å–äººç‰©è®¾å®š | æ¶‰åŠäººç‰©å¯¹è¯/è¡Œä¸º |
| `context:get_outline` | è·å–å¤§çº²ç»“æ„ | éœ€è¦äº†è§£æ–‡ç« èµ°å‘ |
| `context:get_style` | è·å–é£æ ¼æŒ‡å— | æ”¹å†™/æ¶¦è‰²ä»»åŠ¡ |
| `document:search` | å…¨é¡¹ç›®æœç´¢ | æ£€æŸ¥ä¸€è‡´æ€§ |
| `document:read_range` | è¯»å–æŒ‡å®šèŒƒå›´ | éœ€è¦å‚è€ƒå‰åæ–‡ |
| `version:list` | åˆ—å‡ºç‰ˆæœ¬å†å² | ç”¨æˆ·æƒ³å¯¹æ¯”ç‰ˆæœ¬ |
| `version:diff` | å¯¹æ¯”ä¸¤ä¸ªç‰ˆæœ¬ | å±•ç¤ºä¿®æ”¹å·®å¼‚ |

**3.5 æ³¨æ„åŠ›æ“æ§ï¼ˆManus çš„ todo.md ç­–ç•¥ï¼‰**

Manus é€šè¿‡åå¤å¤è¿° todo.md æ¥ä¿æŒ Agent ä¸“æ³¨ã€‚

WriteNow çš„ç±»ä¼¼ç­–ç•¥ï¼š
- æ¯æ¬¡ SKILL è°ƒç”¨æ—¶ï¼Œåœ¨ prompt ä¸­å¼ºè°ƒ"å½“å‰ä»»åŠ¡"
- é¿å… Agent è¢«æ— å…³ä¿¡æ¯åˆ†æ•£æ³¨æ„åŠ›
- ç¤ºä¾‹ï¼š
  ```
  ## å½“å‰ä»»åŠ¡
  æ¶¦è‰²ä»¥ä¸‹æ®µè½ï¼Œä½¿è¡¨è¾¾æ›´åŠ ä¼˜ç¾æµç•…ã€‚
  
  ## å†™ä½œé£æ ¼æŒ‡å—
  {style_guide}
  
  ## å¾…æ¶¦è‰²å†…å®¹
  {selected_text}
  ```

**3.6 é”™è¯¯æ¢å¤**

åˆ›ä½œåœºæ™¯çš„"é”™è¯¯"ï¼š
- AI æ”¹å†™åç”¨æˆ·ä¸æ»¡æ„ â†’ æä¾›ä¸€é”®å›é€€
- AI ç†è§£åå·® â†’ å…è®¸ç”¨æˆ·è¡¥å……æŒ‡ä»¤é‡è¯•
- ç”Ÿæˆå†…å®¹ä¸è®¾å®šå†²çª â†’ ä¸€è‡´æ€§æ£€æŸ¥ SKILL

### 4. å…¨å±€æœç´¢ä¸ç´¢å¼•

**4.1 å…¨æ–‡ç´¢å¼•**

æŠ€æœ¯æ–¹æ¡ˆï¼šSQLite FTS5ï¼ˆå…¨æ–‡æœç´¢ï¼‰

èƒ½åŠ›ï¼š
- æœç´¢äººç‰©åï¼šæ˜¾ç¤ºæ‰€æœ‰å‡ºç°ä½ç½®
- æœç´¢æƒ…èŠ‚å…³é”®è¯ï¼šå®šä½ç›¸å…³åœºæ™¯
- æ¨¡ç³ŠåŒ¹é…ï¼šæ”¯æŒæ‹¼å†™å®¹é”™

å®ç°ç¤ºä¾‹ï¼š
```sql
CREATE VIRTUAL TABLE articles_fts USING fts5(
  title, content, characters, tags
);

-- æœç´¢
SELECT * FROM articles_fts WHERE articles_fts MATCH 'å¼ ä¸‰';
```

**4.2 è¯­ä¹‰æœç´¢**

**æ ¸å¿ƒèƒ½åŠ›**ï¼š
- "æ‰¾åˆ°æå†™æ‚²ä¼¤æƒ…ç»ªçš„æ®µè½"ï¼ˆè¯­ä¹‰ç†è§£ï¼‰
- "å’Œè¿™æ®µç±»ä¼¼çš„æå†™"ï¼ˆç›¸ä¼¼åº¦æ£€ç´¢ï¼‰
- "ä¸»è§’æœ‹å‹çš„å‡ºåœº"ï¼ˆæ¦‚å¿µç†è§£ï¼‰
- æœ"é«˜å…´"èƒ½æ‰¾åˆ°"å¿«ä¹"ã€"å¼€å¿ƒ"ã€"å–œæ‚¦"

**æœ¬åœ° Embedding æ¨¡å‹é€‰æ‹©**ï¼š

| æ¨¡å‹ | å¤§å° | ä¸­æ–‡æ”¯æŒ | æ¨èåº¦ |
|------|------|---------|-------|
| `shibing624/text2vec-base-chinese` | ~100MB | â­â­â­â­â­ ä¸“é—¨ä¸ºä¸­æ–‡ä¼˜åŒ– | **é¦–é€‰** |
| `paraphrase-multilingual-MiniLM-L12-v2` | ~120MB | â­â­â­â­ æ”¯æŒ50+è¯­è¨€ | å¤‡é€‰ï¼ˆå¤šè¯­è¨€ï¼‰ |
| `jinaai/jina-embeddings-v2-base-zh` | ~330MB | â­â­â­â­â­ ä¸­è‹±åŒè¯­ä¸“ç²¾ | æ•ˆæœæœ€å¥½ |

> âš ï¸ æ³¨æ„ï¼š`all-MiniLM-L6-v2` ä¸æ”¯æŒä¸­æ–‡ï¼ŒWriteNow ä¸åº”ä½¿ç”¨

**æŠ€æœ¯å®ç°æ–¹æ¡ˆ**ï¼š

æ–¹æ¡ˆ Aï¼štransformers.jsï¼ˆæ¨èï¼‰
- çº¯ JavaScriptï¼Œæ— éœ€ Python
- ç›´æ¥åœ¨ Electron ä¸­è¿è¡Œ
- æ”¯æŒ WebGPU åŠ é€Ÿ
- NPM åŒ…ï¼š`@xenova/transformers`

æ–¹æ¡ˆ Bï¼šONNX Runtime
- æ¨¡å‹è½¬æˆ ONNX æ ¼å¼
- ç”¨ `onnxruntime-node` è¿è¡Œ
- æ€§èƒ½æ›´å¥½ï¼Œä½“ç§¯å¯æ§

**å‘é‡å­˜å‚¨**ï¼š
- é¦–é€‰ï¼šsqlite-vecï¼ˆSQLite æ‰©å±•ï¼Œçº¯æœ¬åœ°ï¼‰
- å¤‡é€‰ï¼šLanceDBã€Chromaï¼ˆæœ¬åœ°ï¼‰
- äº‘ç«¯ï¼šSupabase pgvectorï¼ˆPro ç”¨æˆ·ï¼‰

**å­¦æœ¯å‚è€ƒ**ï¼š
- RAG: Lewis et al. "Retrieval-Augmented Generation" (arXiv:2005.11401)
- MemGPT: Packer et al. "MemGPT: Towards LLMs as Operating Systems" (arXiv:2310.08560)
- SPLADE: Formal et al. "SPLADE: Sparse Lexical and Expansion Model" (arXiv:2109.10086)

### 5. RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰

**æ ¸å¿ƒç†å¿µ**ï¼šAI ç”Ÿæˆå‰æ™ºèƒ½æ£€ç´¢ç›¸å…³å†…å®¹

**5.1 å·¥ä½œæµç¨‹**

```
ç”¨æˆ·é€‰ä¸­æ–‡æœ¬
    â†“
æ£€æµ‹æåŠçš„äººç‰©/åœ°ç‚¹/äº‹ä»¶
    â†“
RAG æ£€ç´¢ç›¸å…³ä¸Šä¸‹æ–‡
    â”œâ”€â”€ äººç‰©è®¾å®šå¡ç‰‡
    â”œâ”€â”€ æœ€è¿‘å‡ºåœºåœºæ™¯
    â”œâ”€â”€ ç›¸å…³ä¸–ç•Œè§‚è®¾å®š
    â””â”€â”€ æ—¶é—´çº¿ä½ç½®
    â†“
ç»„åˆæˆå®Œæ•´ä¸Šä¸‹æ–‡
    â†“
å‘é€ç»™ AI æ‰§è¡Œ SKILL
```

**5.2 æ£€ç´¢ç­–ç•¥**

| SKILL ç±»å‹ | æ£€ç´¢å†…å®¹ |
|-----------|---------|
| æ¶¦è‰²/æ”¹å†™ | å†™ä½œé£æ ¼æŒ‡å— + å½“å‰ç« èŠ‚ |
| ç”Ÿæˆå¯¹è¯ | å¯¹è¯äººç‰©è®¾å®š + äººç‰©å…³ç³» + å‰æ–‡å¯¹è¯ |
| ç»­å†™ | å‰æ–‡ 2000 å­— + å¤§çº²åç»­ + ç›¸å…³äººç‰© |
| ä¸€è‡´æ€§æ£€æŸ¥ | æ—¶é—´çº¿ + äººç‰©å‡ºåœºè®°å½• + äº‹ä»¶åˆ—è¡¨ |
| æ‰©å†™åœºæ™¯ | åœºæ™¯è®¾å®š + ç›¸å…³äººç‰© + ç¯å¢ƒæå†™æ ·æœ¬ |

**5.3 æ£€ç´¢ç²’åº¦**

- **æ®µè½çº§**ï¼šæ¯ä¸ªæ®µè½ç‹¬ç«‹ Embeddingï¼Œæ£€ç´¢æœ€ç›¸å…³æ®µè½
- **å®ä½“çº§**ï¼šäººç‰©ã€åœ°ç‚¹ã€äº‹ä»¶åˆ†åˆ«ç´¢å¼•
- **ç« èŠ‚çº§**ï¼šä¿ç•™ç« èŠ‚ç»“æ„ä¿¡æ¯

### 6. å¤–æŒ‚è®°å¿†ç³»ç»Ÿ

**æ ¸å¿ƒç†å¿µ**ï¼šAI æŒä¹…åŒ–è®°ä½é¡¹ç›®çŸ¥è¯†å’Œç”¨æˆ·åå¥½

**6.1 è®°å¿†ç±»å‹**

| è®°å¿†ç±»å‹ | å­˜å‚¨å†…å®¹ | æ›´æ–°æ–¹å¼ |
|---------|---------|---------|
| ç”¨æˆ·åå¥½ | å†™ä½œé£æ ¼åå¥½ã€å¸¸ç”¨è¯æ±‡ã€è®¨åŒçš„è¡¨è¾¾ | AI è‡ªåŠ¨æå– |
| é¡¹ç›®çŸ¥è¯† | ä¸–ç•Œè§‚ã€äººç‰©å…³ç³»ã€é‡è¦äº‹ä»¶ | ç”¨æˆ·æ‰‹åŠ¨ + AI è¾…åŠ© |
| å†å²åé¦ˆ | ç”¨æˆ·é‡‡çº³/æ‹’ç»çš„æ”¹å†™æ ·æœ¬ | è‡ªåŠ¨è®°å½• |
| é£æ ¼æ ·æœ¬ | ç”¨æˆ·æ»¡æ„çš„æ®µè½ä½œä¸ºå‚è€ƒ | ç”¨æˆ·æ ‡è®° |

**6.2 è®°å¿†æ³¨å…¥**

```
æ¯æ¬¡ AI è°ƒç”¨æ—¶ï¼š
  1. åŠ è½½ç”¨æˆ·åå¥½è®°å¿†
  2. åŠ è½½é¡¹ç›®çŸ¥è¯†è®°å¿†
  3. åŠ è½½ç›¸å…³å†å²åé¦ˆ
  4. ç»„åˆæˆ system prompt çš„ä¸€éƒ¨åˆ†
```

**6.3 è®°å¿†æ›´æ–°**

- **æ˜¾å¼æ›´æ–°**ï¼šç”¨æˆ·æ‰‹åŠ¨æ·»åŠ /ä¿®æ”¹è®¾å®š
- **éšå¼æ›´æ–°**ï¼šAI ä»ç”¨æˆ·è¡Œä¸ºä¸­æå–åå¥½
  - ç”¨æˆ·å¤šæ¬¡æ‹’ç»åä¸½æå†™ â†’ è®°å¿†"åå¥½ç®€æ´é£æ ¼"
  - ç”¨æˆ·å¤šæ¬¡æ¥å—æŸç±»æ”¹å†™ â†’ è®°å¿†"å–œæ¬¢è¿™ç§è¡¨è¾¾"

### 7. çŸ¥è¯†å›¾è°±ï¼ˆè¿›é˜¶ï¼‰

**æ ¸å¿ƒç†å¿µ**ï¼šæ„å»ºå®ä½“å…³ç³»ç½‘ç»œ

**7.1 å®ä½“ç±»å‹**

- äººç‰©ï¼ˆCharacterï¼‰
- åœ°ç‚¹ï¼ˆLocationï¼‰
- äº‹ä»¶ï¼ˆEventï¼‰
- æ—¶é—´ç‚¹ï¼ˆTimePointï¼‰
- ç‰©å“ï¼ˆItemï¼‰

**7.2 å…³ç³»ç±»å‹**

- äººç‰©-äººç‰©ï¼šæœ‹å‹ã€æ•Œäººã€å®¶äººã€åŒäº‹...
- äººç‰©-åœ°ç‚¹ï¼šå±…ä½ã€å·¥ä½œã€å‡ºç”Ÿ...
- äººç‰©-äº‹ä»¶ï¼šå‚ä¸ã€ç›®å‡»ã€ç­–åˆ’...
- äº‹ä»¶-æ—¶é—´ï¼šå‘ç”Ÿäºã€æŒç»­è‡³...

**7.3 åº”ç”¨åœºæ™¯**

- ä¸€è‡´æ€§æ£€æŸ¥ï¼š"å¼ ä¸‰ä¸å¯èƒ½å‡ºç°åœ¨äº‹ä»¶ Bï¼Œå› ä¸ºä»–åœ¨äº‹ä»¶ A ä¸­å·²ç»..."
- å…³ç³»å¯è§†åŒ–ï¼šæ˜¾ç¤ºäººç‰©å…³ç³»å›¾
- æ—¶é—´çº¿ç”Ÿæˆï¼šè‡ªåŠ¨ç”Ÿæˆäº‹ä»¶æ—¶é—´çº¿
- æƒ…èŠ‚å»ºè®®ï¼š"åŸºäºå½“å‰äººç‰©å…³ç³»ï¼Œå¯èƒ½çš„å†²çªç‚¹..."

**7.4 æŠ€æœ¯æ–¹æ¡ˆ**

- ç®€å•ç‰ˆï¼šJSON å­˜å‚¨å®ä½“å’Œå…³ç³»
- è¿›é˜¶ç‰ˆï¼šå›¾æ•°æ®åº“ï¼ˆå¦‚ Neo4jï¼‰æˆ– SQLite å…³ç³»è¡¨

### 8. AI èƒ½åŠ›å®æ–½è·¯çº¿

| Phase | èƒ½åŠ› | ä¼˜å…ˆçº§ | æŠ€æœ¯å¤æ‚åº¦ |
|-------|------|-------|-----------|
| MVP | åŸºç¡€ä¸Šä¸‹æ–‡å·¥ç¨‹ | P0 | ä½ |
| MVP | å…¨æ–‡ç´¢å¼•ï¼ˆFTS5ï¼‰ | P1 | ä½ |
| V1.0 | åŸºç¡€ RAG | P1 | ä¸­ |
| V1.0 | å¤–æŒ‚è®°å¿†ï¼ˆç”¨æˆ·åå¥½ï¼‰ | P2 | ä¸­ |
| V1.0 | è¯­ä¹‰æœç´¢ | P2 | ä¸­ |
| V2.0 | çŸ¥è¯†å›¾è°± | P3 | é«˜ |
| V2.0 | è‡ªåŠ¨åå¥½å­¦ä¹  | P3 | é«˜ |

### 9. AI äº¤äº’ UX

**è§¦å‘æ–¹å¼**
- é€‰ä¸­æ–‡å­— â†’ æµ®åŠ¨å·¥å…·æ å‡ºç° SKILL å¿«æ·æŒ‰é’®
- `Cmd+K` â†’ æ‰“å¼€å‘½ä»¤é¢æ¿ï¼Œè¾“å…¥ SKILL åç§°
- å³é”®èœå• â†’ å±•å¼€ SKILL åˆ—è¡¨
- å³ä¾§ AI é¢æ¿ â†’ ç‚¹å‡» SKILL å¡ç‰‡

**ç»“æœå±•ç¤º**
- **Diff æ¨¡å¼**ï¼ˆé»˜è®¤ï¼‰ï¼šæ˜¾ç¤ºä¿®æ”¹å‰åå¯¹æ¯”ï¼Œç»¿è‰²æ–°å¢çº¢è‰²åˆ é™¤
- **å†…è”é¢„è§ˆ**ï¼šç›´æ¥åœ¨åŸä½ç½®æ˜¾ç¤ºç»“æœï¼Œæ·¡åŒ–åŸæ–‡
- **ä¾§è¾¹å¯¹æ¯”**ï¼šå·¦å³åˆ†å±å¯¹æ¯”

**æµå¼åé¦ˆ**
- AI å“åº”é€å­—æµå¼æ˜¾ç¤º
- æ˜¾ç¤º"æ­£åœ¨æ€è€ƒ..."åŠ è½½çŠ¶æ€
- æ”¯æŒéšæ—¶å–æ¶ˆï¼ˆ`Esc` é”®ï¼‰

**ç¡®è®¤æœºåˆ¶**
- ç”Ÿæˆå®Œæˆåå¿…é¡»ç”¨æˆ·ç¡®è®¤æ‰åº”ç”¨
- ä¸€é”®æ¥å— / ä¸€é”®æ‹’ç»
- æ”¯æŒéƒ¨åˆ†æ¥å—ï¼ˆé€‰ä¸­ç‰¹å®šæ®µè½åº”ç”¨ï¼‰

### 10. éšç§ä¸æ•°æ®

**é»˜è®¤æ¨¡å¼ï¼ˆShare Dataï¼‰**
- AI è°ƒç”¨æ—¶å‘é€é€‰ä¸­å†…å®¹åˆ°äº‘ç«¯ AI æœåŠ¡
- åˆ›ä½œæ•°æ®å¯ç”¨äºæ”¹è¿›äº§å“ä½“éªŒ
- æ”¯æŒäº‘åŒæ­¥ï¼ˆPro ç”¨æˆ·ï¼‰

**éšç§æ¨¡å¼ï¼ˆPrivacy Modeï¼‰**
- ç”¨æˆ·å¯åœ¨è®¾ç½®ä¸­åˆ‡æ¢
- å¯ç”¨åï¼š
  - AI è°ƒç”¨åªå‘é€æœ€å°å¿…è¦å†…å®¹
  - å†…å®¹ä¸ç”¨äºäº§å“æ”¹è¿›
  - æœ¬åœ°åŠ å¯†å­˜å‚¨
  - å…³é—­ä½¿ç”¨æ•°æ®ä¸ŠæŠ¥

**æ•°æ®å­˜å‚¨**
- æœ¬åœ°æ•°æ®ï¼šSQLite æ•°æ®åº“å­˜å‚¨åœ¨ç”¨æˆ·ç›®å½•
- äº‘ç«¯æ•°æ®ï¼šSupabase PostgreSQLï¼ˆPro ç”¨æˆ·ï¼‰
- ç‰ˆæœ¬å†å²ï¼šæœ¬åœ°ä¿å­˜ï¼Œå¯é€‰åŒæ­¥

**é€æ˜æ€§**
- æ¯æ¬¡ AI è°ƒç”¨æ—¶å¯æŸ¥çœ‹å‘é€çš„å®Œæ•´ä¸Šä¸‹æ–‡
- è®¾ç½®é¡µé¢æ˜¾ç¤ºæ•°æ®ä½¿ç”¨è¯´æ˜
- æä¾›æ•°æ®å¯¼å‡ºåŠŸèƒ½

### 11. å¿«æ·é”®

> ä¼˜å…ˆæ”¯æŒ Windowsï¼ŒmacOS ä½¿ç”¨ Cmd æ›¿ä»£ Ctrl

| åŠŸèƒ½ | Windows | macOS |
|------|---------|-------|
| æ‰“å¼€å‘½ä»¤é¢æ¿ | `Ctrl+K` | `Cmd+K` |
| æ‰‹åŠ¨ä¿å­˜ | `Ctrl+S` | `Cmd+S` |
| å¿«é€Ÿæ¶¦è‰²å½“å‰æ®µè½ | `Ctrl+/` | `Cmd+/` |
| æ˜¾ç¤ºæ‰€æœ‰ SKILL | `Ctrl+Shift+P` | `Cmd+Shift+P` |
| æ’¤é”€ | `Ctrl+Z` | `Cmd+Z` |
| é‡åš | `Ctrl+Shift+Z` / `Ctrl+Y` | `Cmd+Shift+Z` |
| åŠ ç²— | `Ctrl+B` | `Cmd+B` |
| æ–œä½“ | `Ctrl+I` | `Cmd+I` |
| åˆ‡æ¢ç¼–è¾‘/é¢„è§ˆæ¨¡å¼ | `Ctrl+E` | `Cmd+E` |
| åˆ‡æ¢ä¸“æ³¨æ¨¡å¼ | `Ctrl+\` | `Cmd+\` |
| å–æ¶ˆå½“å‰ AI ç”Ÿæˆ | `Esc` | `Esc` |

### 12. ç¦»çº¿èƒ½åŠ›

| åŠŸèƒ½ | ç¦»çº¿å¯ç”¨ | éœ€è¦è”ç½‘ |
|------|---------|---------|
| ç¼–è¾‘æ–‡ç«  | âœ“ | |
| ä¿å­˜æ–‡ç«  | âœ“ | |
| æœ¬åœ°æœç´¢ | âœ“ | |
| ç‰ˆæœ¬å›é€€ | âœ“ | |
| åˆ›ä½œç»Ÿè®¡ | âœ“ | |
| AI SKILL | | âœ“ |
| äº‘åŒæ­¥ | | âœ“ |
| å¤šå¹³å°å‘å¸ƒ | | âœ“ |

ç¦»çº¿æ—¶ AI åŠŸèƒ½æ˜¾ç¤º"éœ€è¦ç½‘ç»œè¿æ¥"æç¤ºï¼Œå…¶ä»–åŠŸèƒ½æ­£å¸¸ä½¿ç”¨ã€‚

### 13. ç¼–è¾‘å™¨æŠ€æœ¯é€‰å‹

**é€‰å‹ï¼šTipTap**

| é€‰é¡¹ | ä¼˜ç‚¹ | ç¼ºç‚¹ | ç»“è®º |
|------|------|------|------|
| **TipTap** | ç°ä»£åŒ–ã€å¯æ‰©å±•ã€Markdown å‹å¥½ | å­¦ä¹ æ›²çº¿ä¸­ç­‰ | âœ… é€‰ç”¨ |
| Monaco | ä»£ç æ„Ÿå¼ºã€åŠŸèƒ½å¼ºå¤§ | å¤ª"ç¨‹åºå‘˜é£æ ¼" | âŒ |
| Quill | ç®€å•æ˜“ç”¨ | æ‰©å±•æ€§å·® | âŒ |

é€‰æ‹© TipTap çš„ç†ç”±ï¼š
- åŸºäº ProseMirrorï¼Œç¨³å®šæˆç†Ÿ
- å†…ç½® Markdown æ”¯æŒ
- æ‰©å±•ç³»ç»Ÿä¼˜ç§€ï¼ˆæ·»åŠ  SKILL æŒ‰é’®æ–¹ä¾¿ï¼‰
- Notionã€Linear ç­‰äº§å“éªŒè¯
- ç¤¾åŒºæ´»è·ƒï¼Œæ–‡æ¡£å®Œå–„

**åŒæ¨¡å¼ç¼–è¾‘**ï¼š

| æ¨¡å¼ | ä½“éªŒ | é€‚åˆç”¨æˆ· |
|------|------|---------|
| Markdown æ¨¡å¼ | æ‰“ `#` è‡ªåŠ¨å˜æ ‡é¢˜ï¼Œ`**` å˜ç²—ä½“ | ç†Ÿæ‚‰ Markdown çš„ç”¨æˆ· |
| å¯Œæ–‡æœ¬æ¨¡å¼ | åƒ Word ä¸€æ ·ï¼Œç”¨å·¥å…·æ ç‚¹æŒ‰é’® | æ™®é€šç”¨æˆ· |

ç‰¹ç‚¹ï¼š
- ç”¨æˆ·å¯éšæ—¶åˆ‡æ¢æ¨¡å¼
- ä¸¤ç§æ¨¡å¼ç¼–è¾‘åŒä¸€æ–‡æ¡£ï¼Œåº•å±‚æ•°æ®ä¸€è‡´
- æ— è®ºå“ªç§æ¨¡å¼ï¼Œéƒ½èƒ½å¯¼å‡ºä¸º Markdown æˆ– Word
- é»˜è®¤æ¨¡å¼å¯åœ¨è®¾ç½®ä¸­é…ç½®

### 14. å¤šå¹³å°å‘å¸ƒ

**æ”¯æŒçš„å¹³å°**ï¼š
- å¾®ä¿¡å…¬ä¼—å·
- çŸ¥ä¹
- å°çº¢ä¹¦
- ä»Šæ—¥å¤´æ¡
- Mediumï¼ˆå›½é™…ï¼‰

**å®ç°æ–¹æ¡ˆ**ï¼š

| æ–¹å¼ | å¤æ‚åº¦ | é€‚ç”¨åœºæ™¯ |
|------|-------|---------|
| æ ¼å¼æ¨¡æ¿å¯¼å‡º | ä½ | ç”¨æˆ·æ‰‹åŠ¨å¤åˆ¶ |
| å‰ªè´´æ¿é€‚é… | ä¸­ | ä¸€é”®å¤åˆ¶ï¼Œä¿æŒæ ¼å¼ |
| API ç›´å‘ | é«˜ | éœ€è¦å¹³å°æˆæƒ |

MVP é˜¶æ®µé‡‡ç”¨"æ ¼å¼æ¨¡æ¿å¯¼å‡º + å‰ªè´´æ¿é€‚é…"æ–¹æ¡ˆã€‚

**æ ¼å¼é€‚é…è¦ç‚¹**ï¼š
- å…¬ä¼—å·ï¼šæ— å¤–é“¾ã€å›¾ç‰‡éœ€ä¸Šä¼ ã€ç‰¹æ®Šæ ·å¼
- çŸ¥ä¹ï¼šæ”¯æŒ Markdownã€æœ‰å­—æ•°é™åˆ¶
- å°çº¢ä¹¦ï¼šå¼ºè°ƒå›¾ç‰‡ã€çŸ­æ–‡æœ¬
- å¤´æ¡ï¼šæ ‡å‡† HTML

### 15. å¯¼å‡ºæ ¼å¼

| æ ¼å¼ | ç”¨é€” | ä¼˜å…ˆçº§ |
|------|------|-------|
| Markdown (.md) | é€šç”¨å¯¼å‡º | P0 |
| Word (.docx) | æŠ•ç¨¿ã€æ‰“å° | P1 |
| PDF | æ‰“å°ã€åˆ†äº« | P1 |
| HTML | ç½‘é¡µå‘å¸ƒ | P2 |
| çº¯æ–‡æœ¬ (.txt) | ç®€å•åˆ†äº« | P2 |

### 16. è‡ªåŠ¨æ›´æ–°æœºåˆ¶

**æŠ€æœ¯æ–¹æ¡ˆ**ï¼šelectron-updater

**æ›´æ–°é€‰é¡¹**ï¼š
- è‡ªåŠ¨æ›´æ–°ï¼ˆé»˜è®¤ï¼‰ï¼šåå°ä¸‹è½½ï¼Œä¸‹æ¬¡å¯åŠ¨ç”Ÿæ•ˆ
- æ‰‹åŠ¨æ›´æ–°ï¼šç”¨æˆ·ä¸»åŠ¨æ£€æŸ¥å’Œå®‰è£…
- è·³è¿‡ç‰ˆæœ¬ï¼šå…è®¸ç”¨æˆ·å¿½ç•¥æŸä¸ªç‰ˆæœ¬

**æ›´æ–°æµç¨‹**ï¼š
```
åº”ç”¨å¯åŠ¨
    â†“
åå°æ£€æŸ¥æ›´æ–°ï¼ˆä¸é˜»å¡ç”¨æˆ·ï¼‰
    â†“
æœ‰æ›´æ–° â†’ åå°é™é»˜ä¸‹è½½
    â†“
ä¸‹è½½å®Œæˆ â†’ æç¤º"æ–°ç‰ˆæœ¬å·²å°±ç»ªï¼Œä¸‹æ¬¡å¯åŠ¨ç”Ÿæ•ˆ"
    â†“
ç”¨æˆ·å¯é€‰æ‹©"ç«‹å³é‡å¯"æˆ–"ç¨å"
```

**æ›´æ–°æœåŠ¡å™¨**ï¼š
- GitHub Releasesï¼ˆå…è´¹ï¼Œæ¨èï¼‰
- è‡ªå»º CDNï¼ˆå¯é€‰ï¼‰

### 17. è‡ªåŠ¨ä¿å­˜

**ç­–ç•¥ï¼šCursor/Antigravity é£æ ¼**

- æ¯æ¬¡ä¿®æ”¹åé˜²æŠ–ä¿å­˜ï¼ˆ2 ç§’æ— æ“ä½œåè§¦å‘ï¼‰
- ä¸éœ€è¦æ‰‹åŠ¨ä¿å­˜å¿«æ·é”®ï¼ˆä½†ä¿ç•™ Ctrl/Cmd+S æ”¯æŒï¼‰
- çŠ¶æ€æ å®æ—¶æ˜¾ç¤ºä¿å­˜çŠ¶æ€
- å´©æºƒæ¢å¤æœºåˆ¶

**çŠ¶æ€æ˜¾ç¤º**ï¼š
- "å·²ä¿å­˜" â†’ ç»¿è‰²å°åœ†ç‚¹
- "ä¿å­˜ä¸­..." â†’ è½¬åœˆåŠ¨ç”»
- "æœªä¿å­˜æ›´æ”¹" â†’ é»„è‰²å°åœ†ç‚¹

**å´©æºƒæ¢å¤**ï¼š
- å®šæ—¶å¿«ç…§ï¼ˆæ¯ 5 åˆ†é’Ÿï¼‰
- åº”ç”¨å¯åŠ¨æ—¶æ£€æµ‹æœªæ­£å¸¸å…³é—­
- æç¤ºæ¢å¤æœ€è¿‘çš„ç¼–è¾‘å†…å®¹

### 18. å¤šè¯­è¨€æ”¯æŒï¼ˆi18nï¼‰

**æ”¯æŒè¯­è¨€**ï¼š
- ç®€ä½“ä¸­æ–‡ï¼ˆé»˜è®¤ï¼‰
- English

**æŠ€æœ¯æ–¹æ¡ˆ**ï¼š
- ä½¿ç”¨ i18nextï¼ˆReact ç”Ÿæ€æ ‡å‡†ï¼‰
- è¯­è¨€æ–‡ä»¶å­˜æ”¾åœ¨ `src/locales/`
- æ”¯æŒç”¨æˆ·åˆ‡æ¢è¯­è¨€

**éœ€è¦å›½é™…åŒ–çš„å†…å®¹**ï¼š
- UI ç•Œé¢æ–‡æœ¬
- æç¤ºä¿¡æ¯
- é”™è¯¯æ¶ˆæ¯
- å¿«æ·é”®æç¤º

**ä¸éœ€è¦å›½é™…åŒ–çš„å†…å®¹**ï¼š
- ç”¨æˆ·åˆ›ä½œå†…å®¹
- AI ç”Ÿæˆå†…å®¹ï¼ˆç”±æ¨¡å‹å†³å®šï¼‰

---

## ä¸‰ã€å•†ä¸šæ¨¡å‹

### å¥—é¤è®¾è®¡

**Freeï¼ˆå…è´¹ç‰ˆï¼‰**
- AIï¼šå…è´¹æ¨¡å‹ï¼Œ5ä¸‡å­—/æœˆ
- åŠŸèƒ½ï¼šæœ¬åœ°ç¼–è¾‘å™¨ã€åŸºç¡€ SKILLï¼ˆ3ä¸ªï¼‰ã€åˆ›ä½œç»Ÿè®¡
- é™åˆ¶ï¼šæ— äº‘åŒæ­¥ã€æ— é«˜ç«¯æ¨¡å‹

**Proï¼ˆï¿¥99/æœˆ æˆ– ï¿¥799/å¹´ï¼‰**
- AIï¼šClaude Sonnet/GPT-4ï¼Œ50ä¸‡å­—/æœˆ
- åŠŸèƒ½ï¼šå…¨éƒ¨ SKILLã€è‡ªå®šä¹‰ SKILLã€äº‘åŒæ­¥ã€å¤šå¹³å°å‘å¸ƒ

**Teamï¼ˆï¿¥199/äºº/æœˆï¼Œ3äººèµ·ï¼‰**
- åŠŸèƒ½ï¼šPro å…¨éƒ¨ + å›¢é˜Ÿåä½œã€ç»Ÿä¸€è´¦å•ã€å›¢é˜Ÿç»Ÿè®¡

### åŠŸèƒ½æƒé™çŸ©é˜µ

| åŠŸèƒ½ | Free | Pro | Team |
|------|------|-----|------|
| æœ¬åœ°ç¼–è¾‘å™¨ | âœ“ | âœ“ | âœ“ |
| åŸºç¡€ SKILL | 3ä¸ª | å…¨éƒ¨ | å…¨éƒ¨ |
| è‡ªå®šä¹‰ SKILL | âœ— | âœ“ | âœ“ |
| é«˜ç«¯ AI æ¨¡å‹ | âœ— | 50ä¸‡å­—/æœˆ | ä¸é™ |
| äº‘åŒæ­¥ | âœ— | âœ“ | âœ“ |
| å¤šå¹³å°å‘å¸ƒ | âœ— | âœ“ | âœ“ |

### åç«¯æŠ€æœ¯æ ˆ

é‡‡ç”¨ Supabase ä¸€ç«™å¼å…¨æ‰˜ç®¡æœåŠ¡ï¼š
- ç”¨æˆ·è®¤è¯ï¼šSupabase Auth
- æ•°æ®åº“ï¼šPostgreSQL
- APIï¼šEdge Functions
- æ”¯ä»˜ï¼šStripeï¼ˆæµ·å¤–ï¼‰/ å¾®ä¿¡æ”¯ä»˜ï¼ˆå›½å†…ï¼‰

---

## å››ã€ç³»ç»Ÿæ¶æ„

### æ¶æ„ï¼šTheia Backend + ç‹¬ç«‹å‰ç«¯ï¼ˆFrontend V2ï¼‰

WriteNow ä¿ç•™ **Eclipse Theia** ä½œä¸ºåç«¯åŸºçº¿ï¼ˆTheia backend + writenow-core extensionï¼‰ï¼Œå¹¶åœ¨ Frontend V2 ä¸­å¼•å…¥ç‹¬ç«‹å‰ç«¯ `writenow-frontend/`ï¼ˆVite + React + Tailwindï¼‰ä½œä¸ºäº§å“ UI baselineï¼Œé€šè¿‡ WebSocket JSON-RPCï¼ˆ`/standalone-rpc`ï¼‰å¤ç”¨æ—¢æœ‰åç«¯æœåŠ¡ã€‚

- å‰ç«¯å±‚ï¼š`writenow-frontend/`ï¼ˆVite + React + Tailwind + shadcn/ui + TipTap + FlexLayoutï¼‰ã€‚
- æ¡Œé¢å±‚ï¼šElectronï¼ˆå¯åŠ¨ Theia backendï¼ŒåŠ è½½ç‹¬ç«‹å‰ç«¯ UIï¼‰ã€‚
- åç«¯å±‚ï¼šTheia backendï¼ˆNodeï¼‰æ‰¿è½½ SQLite/better-sqlite3/sqlite-vecã€RAGã€Embeddingã€Skills ç­‰æœåŠ¡ã€‚
- åˆçº¦ä¸ç±»å‹ï¼šä¿ç•™ contract pipelineï¼ˆ`electron/ipc/**` â†’ ç”Ÿæˆ `src/types/ipc-generated.ts` ä¸ `writenow-theia/writenow-core/src/common/ipc-generated.ts`ï¼‰ã€‚
- è¿ç§»ç­–ç•¥ï¼šTheia frontendï¼ˆwidget/shellï¼‰ä¸å†ä½œä¸ºäº§å“ UI baselineï¼›åç»­ä»¥ç‹¬ç«‹å‰ç«¯ä¸ºä¸»çº¿è¿­ä»£ã€‚

### æŠ€æœ¯æ ˆ

| å±‚æ¬¡ | æŠ€æœ¯ | è¯´æ˜ |
|------|------|------|
| åç«¯åŸºçº¿ | Eclipse Theia 1.67.0 | Theia backend + extensionï¼ˆä¿ç•™ï¼‰ |
| ç‹¬ç«‹å‰ç«¯ | Vite 6 + React 18 + TypeScript | `writenow-frontend/`ï¼ˆä¸¥æ ¼æ¨¡å¼ï¼‰ |
| æ ·å¼ | Tailwind CSS 4.x + shadcn/ui + Radix UI | Design Tokens + å¤šä¸»é¢˜ |
| ç¼–è¾‘å™¨ | TipTap | å¯Œæ–‡æœ¬é»˜è®¤ + Markdown åºåˆ—åŒ– |
| å¸ƒå±€ç³»ç»Ÿ | FlexLayout | IDE çº§æ‹–æ‹½å¸ƒå±€ |
| é€šä¿¡ | WebSocket JSON-RPC (Theia) | `writenow-frontend` â†” backendï¼ˆ`/standalone-rpc`ï¼‰ |
| æ„å»ºå·¥å…· | Yarn (Classic) + Lerna | `writenow-theia/` å·¥ä½œåŒº |
| æœ¬åœ°æ•°æ® | SQLite (better-sqlite3) | backend æŒä¹…åŒ–ï¼ˆå« FTS5ï¼‰ |
| å‘é‡å­˜å‚¨ | sqlite-vec | backend æ‰©å±• |
| Embedding | text2vec-base-chinese | æœ¬åœ°æ¨¡å‹ ~100MB |
| AI æœåŠ¡ | Claude / OpenAI | æµå¼å“åº”ï¼Œæ”¯æŒå–æ¶ˆ |

### å¹³å°æ”¯æŒ

| å¹³å° | æ”¯æŒ | ä¼˜å…ˆçº§ | è¯´æ˜ |
|------|------|-------|------|
| Windows 10/11 | âœ… | **é¦–è¦æ”¯æŒ** | ä¸»è¦å¼€å‘æµ‹è¯•å¹³å° |
| macOS 10.15+ | âœ… | æ¬¡è¦æ”¯æŒ | éœ€è¦ Cmd é”®é€‚é… |
| Linux | âœ… | æ¬¡è¦æ”¯æŒ | AppImage æ ¼å¼ï¼ˆelectron-builderï¼‰ |

### AI æœåŠ¡é…ç½®

**æ”¯æŒçš„ API æ ¼å¼**ï¼š

| æ ¼å¼ | ç¤ºä¾‹ | è¯´æ˜ |
|------|------|------|
| OpenAI å®˜æ–¹ | `https://api.openai.com/v1` | æ ‡å‡†æ ¼å¼ |
| Claude å®˜æ–¹ | `https://api.anthropic.com` | Anthropic å®˜æ–¹ |
| OpenAI ä¸­è½¬ç«™ | `https://api.your-proxy.com/v1` | å…¼å®¹ OpenAI æ ¼å¼ |
| Claude ä¸­è½¬ç«™ | è‡ªå®šä¹‰ | å…¼å®¹ Anthropic æ ¼å¼ |
| Azure OpenAI | Azure ç«¯ç‚¹ | ä¼ä¸šéƒ¨ç½² |

**é…ç½®é¡¹**ï¼š
```typescript
interface AIConfig {
  provider: 'openai' | 'anthropic' | 'custom';
  baseUrl: string;           // API ç«¯ç‚¹ï¼Œæ”¯æŒä¸­è½¬ç«™
  apiKey: string;            // API å¯†é’¥
  model: string;             // æ¨¡å‹åç§°
  maxTokens?: number;        // æœ€å¤§ Token æ•°
  temperature?: number;      // æ¸©åº¦å‚æ•°
}
```

**ç”¨æˆ·è®¾ç½®ç•Œé¢**ï¼š
- æ”¯æŒå¤šä¸ª API é…ç½®
- å¯è®¾ç½®é»˜è®¤ provider
- å¯†é’¥æœ¬åœ°åŠ å¯†å­˜å‚¨

### ç›®å½•ç»“æ„ï¼ˆTheia baselineï¼‰

```
WriteNow/
â”œâ”€â”€ writenow-theia/                # âœ… Production Theia workspace (browser + electron + writenow-core)
â”œâ”€â”€ electron/                      # Shared assets for Theia (not a standalone Electron app)
â”‚   â”œâ”€â”€ ipc/                       # IPC contract SSOT + channel inventory (generation only)
â”‚   â””â”€â”€ skills/                    # Builtin SKILL packages consumed by Theia backend
â”œâ”€â”€ src/                           # Shared assets
â”‚   â”œâ”€â”€ types/                     # Shared/generated IPC types
â”‚   â””â”€â”€ locales/                   # i18n source files
â”œâ”€â”€ docs/                          # å…¥å£/å·¥ç¨‹è§„èŒƒ/å‚è€ƒ
â”œâ”€â”€ openspec/                      # è§„èŒƒï¼ˆæƒå¨ï¼‰
â””â”€â”€ rulebook/                      # ä»»åŠ¡æ‰§è¡Œæ¸…å•ä¸è¯æ®
```

### IPC é€šä¿¡è§„èŒƒ

é€šé“å‘½åï¼š`domain:action` æ ¼å¼

```typescript
// æ–‡ä»¶æ“ä½œ
'file:list'           // è·å–æ–‡ä»¶åˆ—è¡¨
'file:read'           // è¯»å–æ–‡ä»¶
'file:write'          // ä¿å­˜æ–‡ä»¶
'file:create'         // åˆ›å»ºæ–‡ä»¶
'file:delete'         // åˆ é™¤æ–‡ä»¶

// AI æœåŠ¡
'ai:skill:run'        // æ‰§è¡Œ SKILLï¼ˆæµå¼ï¼‰
'ai:skill:cancel'     // å–æ¶ˆæ‰§è¡Œ

// æœç´¢ä¸ RAG
'search:fulltext'     // å…¨æ–‡æœç´¢
'search:semantic'     // è¯­ä¹‰æœç´¢
'rag:retrieve'        // RAG æ£€ç´¢

// Embedding
'embedding:encode'    // æ–‡æœ¬è½¬å‘é‡
'embedding:index'     // å»ºç«‹ç´¢å¼•

// ç‰ˆæœ¬å†å²
'version:list'        // ç‰ˆæœ¬åˆ—è¡¨
'version:create'      // åˆ›å»ºç‰ˆæœ¬
'version:restore'     // æ¢å¤ç‰ˆæœ¬
'version:diff'        // ç‰ˆæœ¬å¯¹æ¯”

// æ›´æ–°
'update:check'        // æ£€æŸ¥æ›´æ–°
'update:download'     // ä¸‹è½½æ›´æ–°
'update:install'      // å®‰è£…æ›´æ–°
'update:getState'     // è·å–æ›´æ–°çŠ¶æ€
'update:skipVersion'  // è·³è¿‡æŒ‡å®šç‰ˆæœ¬
'update:clearSkipped' // æ¸…é™¤è·³è¿‡ç‰ˆæœ¬

// å¯¼å‡º
'export:markdown'     // å¯¼å‡º Markdown
'export:docx'         // å¯¼å‡º Wordï¼ˆ.docxï¼‰
'export:pdf'          // å¯¼å‡º PDF

// å‰ªè´´æ¿
'clipboard:writeText' // å†™å…¥å‰ªè´´æ¿çº¯æ–‡æœ¬
'clipboard:writeHtml' // å†™å…¥å‰ªè´´æ¿ HTML
```

### æ•°æ®åº“ Schema

```sql
-- æ–‡ç« è¡¨
CREATE TABLE articles (
  id TEXT PRIMARY KEY,
  title TEXT NOT NULL,
  content TEXT NOT NULL,
  format TEXT DEFAULT 'markdown',    -- 'markdown' | 'richtext'
  workflow_stage TEXT DEFAULT 'draft',
  word_count INTEGER DEFAULT 0,
  project_id TEXT,                   -- æ‰€å±é¡¹ç›®
  created_at TEXT NOT NULL,
  updated_at TEXT NOT NULL
);

-- æ–‡ç« å…¨æ–‡ç´¢å¼•
CREATE VIRTUAL TABLE articles_fts USING fts5(
  title, content, tokenize='unicode61'
);

-- æ–‡ç« å‘é‡ç´¢å¼•ï¼ˆè¯­ä¹‰æœç´¢ï¼‰
CREATE VIRTUAL TABLE articles_vec USING vec0(
  id TEXT PRIMARY KEY,
  embedding FLOAT[384]               -- text2vec è¾“å‡ºç»´åº¦
);

-- ç‰ˆæœ¬å¿«ç…§
CREATE TABLE article_snapshots (
  id TEXT PRIMARY KEY,
  article_id TEXT NOT NULL,
  content TEXT NOT NULL,
  name TEXT,                         -- ç”¨æˆ·è‡ªå®šä¹‰ç‰ˆæœ¬å
  reason TEXT,                       -- ä¿å­˜åŸå› 
  actor TEXT DEFAULT 'user',         -- 'user' | 'ai' | 'auto'
  created_at TEXT NOT NULL,
  FOREIGN KEY (article_id) REFERENCES articles(id)
);

-- é¡¹ç›®è¡¨
CREATE TABLE projects (
  id TEXT PRIMARY KEY,
  name TEXT NOT NULL,
  description TEXT,
  style_guide TEXT,                  -- å†™ä½œé£æ ¼æŒ‡å—
  created_at TEXT NOT NULL,
  updated_at TEXT NOT NULL
);

-- äººç‰©è®¾å®š
CREATE TABLE characters (
  id TEXT PRIMARY KEY,
  project_id TEXT NOT NULL,
  name TEXT NOT NULL,
  description TEXT,
  traits TEXT,                       -- JSON: æ€§æ ¼ç‰¹ç‚¹
  relationships TEXT,                -- JSON: äººç‰©å…³ç³»
  created_at TEXT NOT NULL,
  updated_at TEXT NOT NULL,
  FOREIGN KEY (project_id) REFERENCES projects(id)
);

-- SKILL å®šä¹‰
CREATE TABLE skills (
  id TEXT PRIMARY KEY,
  name TEXT NOT NULL,
  description TEXT,
  tag TEXT,                          -- åˆ†ç±»æ ‡ç­¾
  system_prompt TEXT,
  user_prompt_template TEXT NOT NULL,
  context_rules TEXT,                -- JSON: ä¸Šä¸‹æ–‡æ³¨å…¥è§„åˆ™
  model TEXT DEFAULT 'claude-sonnet',
  is_builtin INTEGER DEFAULT 0,
  created_at TEXT NOT NULL,
  updated_at TEXT NOT NULL
);

-- ç”¨æˆ·è®°å¿†ï¼ˆå¤–æŒ‚è®°å¿†ï¼‰
CREATE TABLE user_memory (
  id TEXT PRIMARY KEY,
  type TEXT NOT NULL,                -- 'preference' | 'feedback' | 'style'
  content TEXT NOT NULL,
  project_id TEXT,                   -- NULL = å…¨å±€
  created_at TEXT NOT NULL,
  updated_at TEXT NOT NULL
);

-- åˆ›ä½œç»Ÿè®¡
CREATE TABLE writing_stats (
  date TEXT PRIMARY KEY,             -- YYYY-MM-DD
  word_count INTEGER DEFAULT 0,
  writing_minutes INTEGER DEFAULT 0,
  articles_created INTEGER DEFAULT 0,
  skills_used INTEGER DEFAULT 0
);

-- å†™ä½œçº¦æŸé…ç½®è¡¨
CREATE TABLE writing_constraints (
  id TEXT PRIMARY KEY,
  project_id TEXT,
  type TEXT NOT NULL,
  config TEXT NOT NULL,
  level TEXT DEFAULT 'warning',
  enabled INTEGER DEFAULT 1,
  created_at TEXT NOT NULL,
  updated_at TEXT NOT NULL,
  FOREIGN KEY (project_id) REFERENCES projects(id)
);

-- æœ¯è¯­è¡¨
CREATE TABLE terminology (
  id TEXT PRIMARY KEY,
  project_id TEXT,
  term TEXT NOT NULL,
  aliases TEXT,
  definition TEXT,
  created_at TEXT NOT NULL,
  FOREIGN KEY (project_id) REFERENCES projects(id)
);

-- ç¦ç”¨è¯è¡¨ï¼ˆä¾¿äºæ‰¹é‡ç®¡ç†ï¼‰
CREATE TABLE forbidden_words (
  id TEXT PRIMARY KEY,
  project_id TEXT,
  word TEXT NOT NULL,
  category TEXT,
  created_at TEXT NOT NULL,
  FOREIGN KEY (project_id) REFERENCES projects(id)
);

-- ç”¨æˆ·è®¾ç½®
CREATE TABLE settings (
  key TEXT PRIMARY KEY,
  value TEXT NOT NULL
);
```

---

## äº”ã€å®æ–½è·¯çº¿å›¾

### å½“å‰çŠ¶æ€ï¼ˆ2026-01-28ï¼‰

- Sprint 1â€“5ï¼šâœ… å·²å®Œæˆ
- Sprint 6ï¼šâœ… å·²å®Œæˆï¼ˆæ ¸å¿ƒä½“éªŒï¼‰ï¼Œå‰©ä½™é¡¹å·²æš‚åœï¼ˆè§ä¸‹ï¼‰
- Theia è¿ç§»ï¼š
  - Phase 0 PoCï¼šâœ… å·²å®Œæˆï¼ˆ2026-01-22ï¼‰
  - Phase 1ï¼šâœ… å·²å®Œæˆï¼ˆ2026-01-23ï¼‰
  - Phase 2ï¼šâœ… å·²å®Œæˆï¼ˆ2026-01-24ï¼‰
  - Phase 3ï¼šâœ… å·²å®Œæˆï¼ˆ2026-01-24ï¼‰
- Sprint Frontend V2ï¼ˆç‹¬ç«‹å‰ç«¯é‡æ„ï¼‰ï¼š
  - Phase 0â€“6ï¼šâœ… å·²å®Œæˆï¼ˆ2026-01-26ï¼‰
    - P0ï¼šé¡¹ç›®éª¨æ¶ + Tokens + shadcn/ui + RPC + E2E é€šè·¯
    - P1ï¼šFlexLayout å››åŒºå¸ƒå±€ + æ–‡ä»¶æ ‘ + StatusBar + å¸ƒå±€æŒä¹…åŒ–
    - P2ï¼šTipTap ç¼–è¾‘å™¨ï¼ˆå¯Œæ–‡æœ¬é»˜è®¤ï¼‰+ å¤šæ ‡ç­¾ + è‡ªåŠ¨ä¿å­˜/æ‰‹åŠ¨ä¿å­˜ + å¯¼å‡ºï¼ˆdocx/pdf/htmlï¼‰
    - P3ï¼šAI é¢æ¿ï¼ˆskills/æµå¼/å–æ¶ˆï¼‰+ Diff + æ–œæ å‘½ä»¤
    - P4ï¼šcmdk å‘½ä»¤é¢æ¿ + è®¾ç½®é¢æ¿ + ä¸»é¢˜åˆ‡æ¢æŒä¹…åŒ–
    - P5ï¼šç‰ˆæœ¬å†å² + sonner é€šçŸ¥ + å…¨å±€å¿«æ·é”®
    - P6ï¼šElectronï¼ˆå¯åŠ¨åç«¯ + electron-vite + electron-builder é…ç½®ï¼‰+ ç«¯åˆ°ç«¯ E2Eï¼ˆcreate/edit/autosaveã€theme persistã€AI ç¼º key ç¨³å®šé”™è¯¯ï¼‰
  - æ¶æ„é‡æ„æ¸…ç†ï¼šâœ… å·²å®Œæˆï¼ˆ2026-01-27ï¼‰
    - ç§»é™¤ `writenow-frontend-old/`ï¼ˆæ—§å‰ç«¯ï¼‰
    - ç§»é™¤ `figmaå‚è€ƒ/`ï¼ˆæ—§å‚è€ƒä»£ç ï¼‰
    - ç§»é™¤ `backup/`ï¼ˆä¸´æ—¶å¤‡ä»½ï¼‰
- Sprint Write Mode IDEï¼ˆWrite Mode å†™ä½œä¸»è·¯å¾„ï¼‰ï¼š
  - Phase 0ï¼šâœ… å·²å®Œæˆï¼ˆ2026-01-27ï¼›Issue #281ï¼ŒPR #286ï¼‰
    - [x] P0-001ï¼šWrite Mode SSOTï¼ˆçœŸå® `file:*` + TipTap + AI Panelï¼‰
    - [x] P0-002ï¼šä¿å­˜çŠ¶æ€è´¯ç©¿ï¼ˆHeader/StatusBar/FileTreeï¼‰
  - Phase 1ï¼šâœ… å·²å®Œæˆï¼ˆ2026-01-28ï¼›Issue #299ï¼ŒPR #300ï¼‰
    - [x] P1-001ï¼šCommand Palette UIï¼ˆCmd/Ctrl+Kï¼‰ï¼ˆIssue #292ï¼ŒPR #295ï¼‰
    - [x] P1-002ï¼šFocus/Zen æ¨¡å¼ + Esc ä¼˜å…ˆçº§ï¼ˆå–æ¶ˆ AI / é€€å‡º Review / é€€å‡º Focusï¼‰ï¼ˆIssue #292ï¼ŒPR #295ï¼‰
    - [x] P1-003ï¼šReview Mode â€”â€” AI Diff å¯è¯» + Accept/Reject + å¯å›é€€ï¼ˆIssue #299ï¼ŒPR #300ï¼‰
  - Phase 2ï¼šğŸš§ è¿›è¡Œä¸­ï¼ˆ2026-01-28ï¼›Issue #307ï¼ŒPR #308ï¼‰
    - [x] P2-002ï¼šæ€§èƒ½é¢„ç®— + è‡ªåŠ¨åŒ–æµ‹é‡ï¼ˆperf marks + E2E æ–­è¨€ï¼‰
- Sprint AI-Memoryï¼ˆAI è®°å¿† + ä¸Šä¸‹æ–‡å·¥ç¨‹ï¼‰ï¼š
  - Phase 0ï¼šğŸš§ è¿›è¡Œä¸­ï¼ˆ2026-01-27ï¼›Issue #279ï¼ŒPR #280ï¼‰
    - [x] P0-001ï¼šSKILL `context_rules` å£°æ˜å¼æ³¨å…¥
    - [x] P0-002ï¼šKV-cache ç¨³å®šå‰ç¼€æ¨¡æ¿ï¼ˆstablePrefixHashï¼‰
    - [ ] P0-003 ~ P0-006ï¼šåå¥½è‡ªåŠ¨æ³¨å…¥ã€åé¦ˆè¿½è¸ªã€æ–‡ä»¶åŒ–è®¾å®š
- Sprint Open-Source-Optï¼ˆå¼€æºæ–¹æ¡ˆä¼˜åŒ–ï¼‰ï¼š
  - Phase 0ï¼šğŸš§ è¿›è¡Œä¸­ï¼ˆ2026-01-27ï¼›Issue #279ï¼ŒPR #280ï¼‰
    - [x] P0-001ï¼šProvider Native Prompt Cachingï¼ˆAnthropic `cache_control: ephemeral`ï¼‰
    - [ ] P0-002ï¼šTipTap AI Diff Extensionï¼ˆWIPï¼‰
  - Phase 1ï¼šâœ… å·²å®Œæˆï¼ˆ2026-01-27ï¼›Issue #293ï¼ŒPR #298ï¼‰
    - [x] P1-002ï¼šæœ¬åœ° LLM Tab ç»­å†™ï¼ˆnode-llama-cppï¼‰
  - Phase 2ï¼šğŸš§ è¿›è¡Œä¸­ï¼ˆ2026-01-28ï¼›Issue #303ï¼ŒPR #304ï¼‰
    - [x] P2-001ï¼šPlaywright çœŸå® E2Eï¼ˆæ ¸å¿ƒåˆ›ä½œè·¯å¾„ + AI è¾¹ç•Œåˆ†æ”¯ï¼‰
- å¾…æ‰§è¡Œçš„ Planï¼ˆå•†ä¸šåŒ–åŸºçŸ³ï¼‰ï¼š
  - `.cursor/plans/ai_memory_research_report_c05e39ce.plan.md`ï¼ˆAI è®°å¿†ç³»ç»Ÿç ”ç©¶ + å®æ–½è·¯çº¿ï¼‰
  - `.cursor/plans/wn_open_source_optimization_c81686d6.plan.md`ï¼ˆå¼€æºæ–¹æ¡ˆä¼˜åŒ–è·¯çº¿ï¼‰
  - `.cursor/plans/å‰ç«¯ä¼˜åŒ–ç­–ç•¥å»ºè®®_8d3c4032.plan.md`ï¼ˆå‰ç«¯ä¼˜åŒ–è°ƒç ”ï¼Œå¾…å•†ä¸šåŒ–åŸºçŸ³å®Œæˆåå¯åŠ¨ï¼‰
- OpenSpec å½’æ¡£ï¼ˆ2026-01-27ï¼‰ï¼š
  - å·²å½’æ¡£ 15 ä¸ªæ—§ Sprint/Remediation specs åˆ° `openspec/specs/_archived/`
  - ä¿ç•™æ´»è·ƒ specsï¼š`api-contract/`ï¼ˆIPC å¥‘çº¦ï¼‰ã€`writenow-spec/`ï¼ˆé¡¹ç›®ä¸»è§„èŒƒï¼‰

### Sprint 1ï¼šå¯ç”¨çš„ç¼–è¾‘å™¨ï¼ˆ1-2å‘¨ï¼‰âœ… å·²å®Œæˆ
- [x] TipTap ç¼–è¾‘å™¨é›†æˆ
- [x] çœŸå®çš„æ–‡ä»¶ä¿å­˜/åŠ è½½
- [x] è‡ªåŠ¨ä¿å­˜ + å´©æºƒæ¢å¤
- [x] åŒæ¨¡å¼ç¼–è¾‘
- [x] Zustand çŠ¶æ€ç®¡ç†æ¥å…¥

### Sprint 2Aï¼šAI åŸºç¡€é“¾è·¯ï¼ˆ2 å‘¨ï¼‰âœ… å·²å®Œæˆ
- [x] Claude API é›†æˆï¼ˆæµå¼ + å¯å–æ¶ˆï¼‰
- [x] SKILL ç³»ç»Ÿæ ¸å¿ƒï¼ˆé€‰ä¸­ â†’ æ‰§è¡Œ â†’ diff â†’ åº”ç”¨ï¼‰
- [x] åŸºç¡€ SKILLï¼ˆå†…ç½®ç¤ºä¾‹ï¼‰
- [x] Diff å±•ç¤ºä¸ç¡®è®¤æœºåˆ¶
- [x] ç‰ˆæœ¬å†å²è®°å½•ï¼ˆåˆ›å»º/åˆ—è¡¨/å›é€€/å¯¹æ¯”ï¼‰

### Sprint 2Bï¼šJudge Layer + å†™ä½œçº¦æŸï¼ˆ1â€“2 å‘¨ï¼‰âœ… å·²å®Œæˆ
- [x] Judge Layer æ¶æ„ï¼ˆL1/L2 çº¦æŸï¼‰
- [x] L1 ç¦ç”¨è¯ä¸æ‰©å±•çº¦æŸ
- [x] L2 æ¨¡å‹é›†æˆï¼ˆæœ¬åœ° judgeï¼‰
- [x] æ¨¡å‹ä¸‹è½½ä¸å°±ç»ªçŠ¶æ€æœº
- [x] è¿è§„ diff å±•ç¤ºä¸äº¤äº’é—­ç¯
- [x] å†™ä½œçº¦æŸé…ç½® UIï¼ˆè¯»å–/ä¿å­˜/å¯ç”¨ï¼‰

### Sprint 2.5ï¼šä¸Šä¸‹æ–‡å·¥ç¨‹ï¼ˆæ–°å¢ï¼‰âœ… å·²å®Œæˆ
- [x] Manus ä¸Šä¸‹æ–‡æ–¹æ³•è®ºè½åœ°ï¼ˆåˆ†å±‚/å‹ç¼©/æ³¨å…¥è§„åˆ™ï¼‰
- [x] Context Assemblerï¼ˆå¯è§£é‡Šã€å¯è°ƒè¯•ã€å¯å¤ç°ï¼‰
- [x] Token Budget ç®¡ç†ï¼ˆè¶…é•¿é™çº§ç­–ç•¥ï¼‰

### Sprint 3ï¼šæ™ºèƒ½ä¸Šä¸‹æ–‡ï¼ˆ2å‘¨ï¼‰âœ… å·²å®Œæˆ
- [x] æœ¬åœ° Embedding æ¨¡å‹æ‰“åŒ…
- [x] SQLite FTS5 å…¨æ–‡ç´¢å¼•
- [x] åŸºç¡€ RAG
- [x] sqlite-vec å‘é‡å­˜å‚¨

### Sprint 4ï¼šå‘å¸ƒå‡†å¤‡ï¼ˆ1å‘¨ï¼‰âœ… å·²å®Œæˆ
- [x] electron-updater è‡ªåŠ¨æ›´æ–°
- [x] å¤šæ ¼å¼å¯¼å‡º
- [x] åŸºç¡€ i18n
- [x] å¤šå¹³å°å‘å¸ƒæ ¼å¼é€‚é…

### Sprint 5ï¼šé¡¹ç›®ç®¡ç†ï¼ˆ2å‘¨ï¼‰âœ… å·²å®Œæˆ
- [x] é¡¹ç›®/æ–‡ä»¶å¤¹ç»“æ„
- [x] äººç‰©è®¾å®šå¡ç‰‡
- [x] å¤§çº²è§†å›¾
- [x] çŸ¥è¯†å›¾è°±åŸºç¡€

### IPC å¥‘çº¦è‡ªåŠ¨åŒ–ï¼ˆè·¨ Sprint åŸºå»ºï¼‰âœ… å·²å®Œæˆ
- [x] IPC SSOTï¼š`electron/ipc/*` â†’ è‡ªåŠ¨ç”Ÿæˆ `src/types/ipc-generated.ts`
- [x] æ¼‚ç§»æŠ¤æ ï¼š`npm run contract:check`ï¼ˆCI é—¨ç¦ï¼Œç¦æ­¢æ‰‹æ”¹ç”Ÿæˆæ–‡ä»¶ï¼‰

### Sprint 6ï¼šå¢å¼ºä½“éªŒï¼ˆ2å‘¨ï¼‰
- [x] åˆ›ä½œç»Ÿè®¡
- [x] ç•ªèŒ„é’Ÿ
- [x] ç¼–è¾‘å™¨å¤šæ ‡ç­¾ï¼ˆå¤šæ–‡æ¡£ TabBar + Toolbar å•è¡Œåˆå¹¶ï¼‰
- [x] å¿ƒæµä¿æŠ¤ï¼ˆTypewriter / Paragraph Focus / Zenï¼‰
- [ ] å¤–æŒ‚è®°å¿†ï¼ˆç”¨æˆ·åå¥½å­¦ä¹ ï¼‰ï¼ˆPaused: 2026-01-22; to be rescheduled post-Theia baselineï¼‰
- [ ] å‘½ä»¤é¢æ¿ (Cmd+K)ï¼ˆPaused: 2026-01-22; to be rescheduled post-Theia baselineï¼‰

### Sprintï¼šTheia Migrationï¼ˆâœ… å·²å®Œæˆï¼‰

#### Phase 0ï¼šPoCï¼ˆâœ… å·²å®Œæˆï¼š2026-01-22ï¼›Issue #111ï¼‰
- [x] PoCï¼šTheia + TipTapï¼ˆè¾“å…¥/ç„¦ç‚¹/å¿«æ·é”®ï¼‰
- [x] PoCï¼šTheia backend + better-sqlite3 + sqlite-vec
- [x] PoCï¼šå­˜å‚¨è¯­ä¹‰å†³ç­–ï¼šHybridï¼ˆproject = workspace rootï¼‰

#### Phase 1ï¼šScaffoldï¼ˆâœ… å·²å®Œæˆï¼š2026-01-23ï¼‰
- [x] Task 004ï¼šTheia åº”ç”¨å£³ä½“è„šæ‰‹æ¶ï¼ˆ`writenow-theia/`ï¼šbrowser + electron + core extensionï¼Œå¯å¯åŠ¨/å¯æ‰©å±•ï¼‰
- [x] Task 005ï¼šæ¨¡å—è£å‰ªï¼ˆç§»é™¤ IDE-only modulesï¼‰
- [x] Task 006ï¼šTipTap Editor Widgetï¼ˆ`.md` ç»‘å®š + Save/Dirty ç”Ÿå‘½å‘¨æœŸï¼‰
- [x] Task 007ï¼šåŸºç¡€å¸ƒå±€ + Branding
- [x] è§„èŒƒï¼š`openspec/specs/sprint-theia-migration/spec.md`

#### Phase 2ï¼šCore Migrationï¼ˆâœ… å·²å®Œæˆï¼š2026-01-24ï¼‰
- [x] Task 008ï¼šIPC migrationï¼ˆElectron IPC â†’ Theia JSON-RPCï¼‰
- [x] Task 009ï¼šSQLite migrationï¼ˆinit + schema + CRUDï¼‰
- [x] Task 010ï¼šRAG migrationï¼ˆindexer + retrievalï¼ŒFTS + sqlite-vecï¼‰
- [x] Task 011ï¼šEmbedding migrationï¼ˆworker + ONNX assets + semantic backtestï¼‰

#### Phase 3ï¼šWidget Migrationï¼ˆâœ… å·²å®Œæˆï¼š2026-01-24ï¼‰
- [x] Task 012ï¼šAI Panel Widget
- [x] Task 013ï¼šVersion History Widget
- [x] Task 014ï¼šKnowledge Graph Widget

### Sprint 7ï¼šäº‘æœåŠ¡ï¼ˆ3å‘¨ï¼‰
- [ ] Supabase ç”¨æˆ·è®¤è¯
- [ ] Stripe è®¢é˜…ç®¡ç†
- [ ] äº‘åŒæ­¥
- [ ] Pro åŠŸèƒ½ä¸Šçº¿

---

## å…­ã€è¡¡é‡æŒ‡æ ‡

### äº§å“æŒ‡æ ‡
- æ—¥æ´»ç”¨æˆ· (DAU)
- ç”¨æˆ·ç•™å­˜ç‡ï¼ˆ7æ—¥/30æ—¥ï¼‰
- AI åŠŸèƒ½ä½¿ç”¨ç‡ï¼ˆSKILL è°ƒç”¨æ¬¡æ•°/ç”¨æˆ·ï¼‰
- ä»˜è´¹è½¬åŒ–ç‡
- ARPUï¼ˆæ¯ç”¨æˆ·å¹³å‡æ”¶å…¥ï¼‰

### ä½“éªŒæŒ‡æ ‡
- ä»æ‰“å¼€åˆ°å¼€å§‹å†™ä½œçš„æ—¶é—´
- SKILL æ‰§è¡Œåçš„é‡‡çº³ç‡
- ç‰ˆæœ¬å›é€€é¢‘ç‡
- è¯­ä¹‰æœç´¢ä½¿ç”¨ç‡
- å´©æºƒæ¢å¤è§¦å‘ç‡ï¼ˆè¶Šä½è¶Šå¥½ï¼‰

### æŠ€æœ¯æŒ‡æ ‡
- è‡ªåŠ¨ä¿å­˜æˆåŠŸç‡
- KV ç¼“å­˜å‘½ä¸­ç‡ï¼ˆæˆæœ¬ä¼˜åŒ–ï¼‰
- æœ¬åœ° Embedding æ€§èƒ½ï¼ˆms/æ¬¡ï¼‰
- åº”ç”¨å¯åŠ¨æ—¶é—´

# 任务 011: 违规项 Diff 展示

## 目标

将 Judge 检查结果集成到 Diff 视图，用户可直观看到约束违规（红色下划线标注、悬停详情、违规汇总），并在全部通过时保持低打扰。

## 依赖

- 任务 004：Diff 展示与确认机制
- 任务 006：Judge 层架构与接口定义

## 实现步骤

1. 违规标注组件：
   - 创建 `src/components/Diff/ViolationMarker.tsx`，用于渲染违规下划线与 tooltip。
2. 高亮与详情：
   - 高亮违规位置（红色下划线）
   - 悬停或点击展示违规详情（类型、原因、建议）
3. 违规汇总：
   - Diff 顶部或底部展示违规汇总（如"3 个警告，1 个错误"），并支持快速定位（可选）。
4. 通过时无干扰：
   - 当所有约束检查通过时，不显示额外的“全部通过”提示（低打扰原则）。

## 新增/修改文件

- `src/components/Diff/ViolationMarker.tsx` - 违规标注组件（新增）
- `src/components/AI/DiffView.tsx`（或等价组件）- 接入违规标注与汇总（修改）

## 验收标准

- [ ] 违规项在 Diff 中可见
- [ ] 悬停显示详情
- [ ] 全部通过时无干扰

## 参考

- Sprint 2 规格：`openspec/specs/sprint-2-ai/spec.md`（违规标注展示/违规汇总/通过时无干扰）

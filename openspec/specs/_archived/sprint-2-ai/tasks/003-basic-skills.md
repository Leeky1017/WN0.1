# 任务 003: 3 个基础 SKILL 实现（润色/扩写/精简）

## 目标

实现 3 个内置基础 SKILL（润色文本、扩写段落、精简段落）：包含 Prompt 模板、上下文注入规则与输出格式约束；并通过流式响应实时展示生成过程，为 Diff 确认与版本历史提供稳定输入。

## 依赖

- 任务 001：Claude API 集成（流式调用通道）
- 任务 002：SKILL 系统核心架构（统一定义与初始化机制）

## 实现步骤

1. 定义每个 SKILL 的 Prompt：
   - 润色：提升表达与用词一致性
   - 扩写：丰富细节描写但不改变事实
   - 精简：删减冗余保持语义不变
2. 输出格式约束（Diff 友好）：
   - 明确要求输出“建议稿”（可直接替换选中片段）
   - 避免输出与正文无关的解释性文字（或将解释放入可选字段）
3. 上下文注入规则：
   - 文章级：当前段落/标题/大纲（若可得）
   - 项目级：风格指南（若可得）
4. UI 接入与流式展示：
   - 选择文本 → 触发 SKILL → 流式展示建议稿
   - 生成完成后进入 Diff 确认（任务 004）

## 新增/修改文件

- `electron/ipc/skills.cjs` 或 `src/lib/skills/builtin.ts` - 内置 SKILL 定义与初始化（新增/修改）
- `src/stores/aiStore.ts` - 当前 SKILL 与流式输出状态（修改）
- `src/components/AI/SkillPanel.tsx` - 触发入口（修改）

## 验收标准

- [ ] 3 个基础 SKILL 在 UI 可见并可触发
- [ ] 生成过程为流式展示（中间态可见）
- [ ] 最终输出为可用于 Diff/替换的“建议稿”
- [ ] 生成完成后进入 Diff 确认流程（任务 004）

## 参考

- 核心规范：`openspec/specs/writenow-spec/spec.md` 第 63-70 行（基础 SKILL 列表）
- 核心规范：`openspec/specs/writenow-spec/spec.md` 第 338-359 行（Diff + 确认 + 流式反馈）


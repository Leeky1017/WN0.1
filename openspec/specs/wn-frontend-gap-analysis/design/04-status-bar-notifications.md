# Design: 状态栏与通知缺口

## 现状分析

状态栏几乎为空，无任何有意义的状态信息显示。

### 缺失功能

| 功能 | 后端支持 | 优先级 | 备注 |
|------|---------|-------|------|
| 字数统计 | 有 `stats` IPC | P0 | 后端有，前端无显示 |
| AI 连接状态 | 有 IPC | P0 | 无连接状态指示 |
| 行号/列号 | 无 | P1 | 编辑器基本功能 |
| 同步状态 | 有 | P1 | 无同步状态显示 |
| 通知中心 | 无 | P1 | 无通知管理 |
| 全局进度条 | 无 | P1 | 无全局操作进度 |
| 文件编码 | 无 | P2 | 无编码显示 |

## 设计方案

### 1. 状态栏布局

左侧：AI 状态、字数统计
中间：光标位置、编码、语言
右侧：通知、同步状态

### 2. AI 状态指示

| 状态 | 显示 |
|------|------|
| 已连接 | 绿色指示灯 |
| 连接中 | 黄色指示灯 |
| 未连接 | 红色指示灯 |
| 请求中 | 蓝色加载指示 |

### 3. 通知中心

- 点击状态栏通知图标打开
- 显示最近通知列表
- 支持清空操作
- 通知级别：成功、警告、错误、信息

## 技术实现

- 使用 Theia StatusBar contribution
- 状态更新通过 IPC 事件推送
- 通知存储在内存（会话级别）

## 文件变更预期

| 操作 | 文件路径 |
|------|---------|
| Add | `writenow-core/src/browser/writenow-statusbar-contribution.ts` |
| Add | `writenow-core/src/browser/notification-widget.tsx` |
| Update | `writenow-core/src/browser/writenow-core-frontend-module.ts` |

# 任务 001: 时间线引擎（提取 + 存储 + 可视化）

## 目标

为项目提供“时间线视图”闭环：从正文中提取时间线事件（规则/结构化优先）、持久化存储，并在 UI 中以可回溯证据的方式可视化呈现；强调客观呈现，不输出“矛盾/错误”结论。

## 依赖

- Sprint 5：项目与知识图谱底座（实体/关系持久化 + 基础可视化）
- 文档定位能力（至少章节级跳转；优先支持段落/范围跳转）

## 实现步骤

1. 事件模型与证据指针：
   - 定义“事件/时间点”的最小结构（id、摘要、时间表达、关联人物、证据指针）
   - 证据指针必须可跳转回正文位置（避免黑箱）
2. 提取与刷新策略：
   - 提供“生成/刷新时间线”的显式入口与进度状态
   - 支持失败可重试；失败不得阻塞写作
3. 时间线视图：
   - 按故事时间（可得）或出现顺序排序
   - 条目展示摘要 + 证据跳转；可按人物筛选（如可得）
4. 中立呈现护栏：
   - 不自动提示矛盾；仅并列呈现“事实 + 证据”

## 验收标准

- [ ] 时间线视图可打开，且可生成/刷新时间线并展示条目
- [ ] 每条时间线条目可跳转回正文证据位置
- [ ] 生成失败可观测且可重试，不影响编辑器继续写作
- [ ] 不出现任何“系统主动指错”的自动提示

## 参考

- IDE-Advanced 规范：`openspec/specs/sprint-ide-advanced/spec.md`
- Sprint 5 底座：`openspec/specs/sprint-5-project/spec.md`
- 核心规范：`openspec/specs/writenow-spec/spec.md`（时间线生成/人物时间线在上下文注入中的位置）

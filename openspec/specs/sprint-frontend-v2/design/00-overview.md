# 设计概述

## 目录结构

```
WriteNow/
├── writenow-theia/              # 【保留】Theia 后端
│   └── writenow-core/src/node/  # 后端服务（不动）
│
├── writenow-frontend/           # 【新建】独立前端
│   ├── src/
│   │   ├── app/                 # 应用入口
│   │   ├── components/          # 通用组件
│   │   │   ├── ui/              # 基础 UI 组件（shadcn/ui）
│   │   │   ├── layout/          # 布局组件
│   │   │   ├── editor/          # 编辑器组件
│   │   │   └── panels/          # 面板组件
│   │   ├── features/            # 功能模块
│   │   │   ├── file-tree/       # 文件树
│   │   │   ├── ai-panel/        # AI 面板
│   │   │   ├── version-history/ # 版本历史
│   │   │   └── settings/        # 设置
│   │   ├── lib/                 # 工具库
│   │   │   ├── rpc/             # RPC 客户端
│   │   │   ├── hooks/           # React Hooks
│   │   │   └── utils/           # 工具函数
│   │   ├── stores/              # 状态管理
│   │   └── styles/              # 样式系统
│   │       ├── tokens.css       # Design Tokens
│   │       ├── themes/          # 主题定义
│   │       └── globals.css      # 全局样式
│   ├── electron/                # Electron 集成
│   │   ├── main.ts              # 主进程入口
│   │   └── preload.ts           # 预加载脚本
│   ├── public/                  # 静态资源
│   ├── index.html
│   ├── vite.config.ts
│   ├── tailwind.config.ts
│   ├── tsconfig.json
│   └── package.json
│
├── src/                         # 【保留】共享类型
│   ├── types/                   # IPC 类型定义
│   └── locales/                 # 国际化
│
└── electron/                    # 【保留】共享资源
    └── skills/                  # 内置 SKILL 包
```

## 系统架构图

```
┌─────────────────────────────────────────────────────────────────┐
│  Electron 应用                                                   │
│  ┌─────────────────────────────────────────────────────────────┐│
│  │  主进程（Main Process）                                      ││
│  │  - 启动 Theia 后端服务                                       ││
│  │  - 创建 BrowserWindow                                        ││
│  │  - 处理系统级事件（菜单、托盘、更新）                          ││
│  └─────────────────────────────────────────────────────────────┘│
│                              ↑↓ IPC                               │
│  ┌─────────────────────────────────────────────────────────────┐│
│  │  渲染进程（Renderer Process）                                ││
│  │  ┌─────────────────────────────────────────────────────────┐││
│  │  │  新前端（writenow-frontend/）                           │││
│  │  │  - React 18 + TypeScript                                │││
│  │  │  - Vite 构建                                            │││
│  │  │  - Tailwind CSS + Design Tokens                         │││
│  │  │  - 组件库（shadcn/ui + Radix）                          │││
│  │  └─────────────────────────────────────────────────────────┘││
│  └─────────────────────────────────────────────────────────────┘│
│                              ↑↓ WebSocket (JSON-RPC)              │
│  ┌─────────────────────────────────────────────────────────────┐│
│  │  Theia 后端（writenow-theia/writenow-core/src/node/）       ││
│  │  - 文件服务、项目服务、版本服务                               ││
│  │  - AI 服务（流式推送）                                        ││
│  │  - RAG、知识图谱、向量搜索                                    ││
│  │  - SQLite 数据库                                              ││
│  └─────────────────────────────────────────────────────────────┘│
└─────────────────────────────────────────────────────────────────┘
```

## 设计参考

**学习对象**（按优先级）：
1. **Cursor** — IDE 布局、深色主题、命令面板
2. **Linear** — 极简设计、动效、色彩克制
3. **Notion** — 编辑器体验、块级编辑
4. **Obsidian** — 文件树、分屏、本地优先

**核心原则**：
1. **内容优先**：UI 服务于内容，不喧宾夺主
2. **色彩克制**：主色只用一个蓝色，其余都是灰色
3. **动效有意义**：只在需要引导注意力时使用动画
4. **一致性**：所有组件遵循同一套 Token
